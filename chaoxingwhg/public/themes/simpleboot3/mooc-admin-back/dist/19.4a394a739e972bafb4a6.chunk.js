webpackJsonp([19],{264:function(t,e,n){"use strict";function i(t){u||n(949)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(795),s=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);var o=n(951),c=n.n(o),u=!1,l=n(0),p=i,d=l(s.a,c.a,!1,p,null,null);d.options.__file="src/views/user/user.vue",e.default=d.exports},795:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(29),s=i(a),r=n(6),o=i(r);e.default={data:function(){var t=this;return{columns:[{type:"selection",width:60,align:"center"},{title:"ID",key:"id"},{title:"用户名",key:"user_login"},{title:"所属文化馆",key:"center_name"},{title:"角色",key:"type",render:function(t,e){return 1===e.row.type?t("span",{},"用户"):2===e.row.type?t("span",{},"老师"):3===e.row.type?t("span",{},"超级管理员"):t("span",{},"文化馆管理员")}},{title:"状态",key:"status",render:function(t,e){return t("span",{},1===e.row.status?"启用":"禁用")}},{title:"操作",key:"action",width:240,align:"center",render:function(e,n){var i=t,a=[];return 2===n.row.type&&n.row.center_id.toString()===t.cid?a[a.length]=e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){i.$router.push({name:"user_edit",params:{id:n.row.id}})}}},"编辑"):a[a.length]=e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){i.$router.push({name:"user_edit",params:{id:n.row.id}})}}},"查看"),n.row.center_id.toString()===t.cid&&1!==n.row.id&&(a[a.length]=e("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.changeStatus(1===n.row.status?0:1,n.row.id)}}},1===n.row.status?"禁用":"启用")),e("div",a)}}],data:[],nick_name:"",type:[],current:1,pageSize:10,total:0,ids:[],status:0,cid:0}},created:function(){this.cid=o.default.get("center_id"),this.getUserList()},methods:{request:function(t,e){s.default.get("http://demo-mooc.com/v1/proxy/index",{params:t}).then(e).catch()},getUserList:function(){var t=this;t.request({api:"/v1/user/index",user_type:3,page:this.current,len:this.pageSize,all:1,type:this.type,nick_name:this.nick_name},function(e){var n=e.data;1===n.status&&(t.data=n.data.list,t.total=n.data.num)})},handlePageChange:function(t){this.current=t,this.getUserList()},Search:function(){this.getUserList()},Empty:function(){this.nick_name="",this.type=0},selectionClick:function(t){for(var e=this,n=[],i=0;i<t.length;i++)n.push(t[i].id);e.ids=n},changeStatus:function(t,e){var n=this;n.request({api:"/v1/user/updateStatus",user_type:3,id:e,ids:this.ids,status:t},function(t){console.log(t),1===t.data.status?(n.$Message.success("修改状态成功"),n.getUserList()):n.$Message.error(t.data.msg)})},changeAllStatus:function(t){console.log(this.ids),this.ids.length>0?(this.changeStatus(t),this.ids=[]):this.$Message.info("请至少选择一项")},userAdd:function(){this.$router.push({name:"user_add"})}}}},949:function(t,e,n){var i=n(950);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(10)("743275e5",i,!1,{})},950:function(t,e,n){e=t.exports=n(9)(!1),e.push([t.i,"\n.switch-language-row1 {\n  height: 240px !important;\n}\n.switch-language-tip {\n  font-size: 12px;\n  color: gray;\n  margin-top: 30px;\n}\n.ivu-poptip-confirm .ivu-icon {\n  left: 24px;\n}\n",""])},951:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{gutter:10}},[n("Col",[n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[n("Icon",{attrs:{type:"person-stalker"}}),t._v("\n                    用户管理\n                ")],1),t._v(" "),n("Row",[n("label",{attrs:{for:"nick_name"}},[t._v("用户")]),t._v(" "),n("Input",{staticStyle:{width:"200px"},attrs:{id:"nick_name",placeholder:""},model:{value:t.nick_name,callback:function(e){t.nick_name=e},expression:"nick_name"}}),t._v(" "),n("label",{attrs:{for:"type"}},[t._v("角色")]),t._v(" "),n("Select",{staticStyle:{width:"200px"},attrs:{id:"type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[n("Option",{attrs:{value:"1"}},[t._v("用户")]),t._v(" "),n("Option",{attrs:{value:"2"}},[t._v("老师")])],1),t._v(" "),n("Button",{attrs:{icon:"search",type:"primary"},on:{click:t.Search}},[t._v("搜索")]),t._v(" "),n("Button",{attrs:{type:"ghost"},on:{click:t.Empty}},[t._v("清空")])],1),t._v(" "),n("Row",{staticStyle:{"margin-top":"15px"}},[n("Button",{attrs:{type:"warning"},on:{click:function(e){t.changeAllStatus(0)}}},[t._v("禁用")]),t._v(" "),n("Button",{attrs:{type:"warning"},on:{click:function(e){t.changeAllStatus(1)}}},[t._v("启用")]),t._v(" "),n("Button",{attrs:{type:"info"},on:{click:t.userAdd}},[t._v("添加老师")])],1),t._v(" "),n("Row",{staticStyle:{"margin-top":"15px"},attrs:{id:"columnTree"}},[n("Table",{ref:"selection",attrs:{"highlight-row":"",stripe:"",border:"",columns:t.columns,data:t.data},on:{"on-selection-change":t.selectionClick}})],1),t._v(" "),n("Page",{attrs:{current:t.current,"page-size":t.pageSize,total:t.total,"show-elevator":"","show-total":""},on:{"on-change":t.handlePageChange}})],1)],1)],1)],1)},a=[];i._withStripped=!0;var s={render:i,staticRenderFns:a};e.default=s}});