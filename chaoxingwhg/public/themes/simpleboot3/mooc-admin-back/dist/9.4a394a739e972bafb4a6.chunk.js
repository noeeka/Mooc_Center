webpackJsonp([9],{241:function(t,e,n){"use strict";function i(t){d||n(878)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(772),o=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);var s=n(880),c=n.n(s),d=!1,u=n(0),l=i,p=u(o.a,c.a,!1,l,null,null);p.options.__file="src/views/video/video-edit.vue",e.default=p.exports},285:function(t,e,n){"use strict";function i(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=r(e),this.reject=r(n)}var r=n(85);t.exports.f=function(t){return new i(t)}},295:function(t,e,n){var i=n(11),r=n(85),o=n(2)("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||void 0==(n=i(a)[o])?e:r(n)}},296:function(t,e,n){var i,r,o,a=n(50),s=n(321),c=n(87),d=n(51),u=n(5),l=u.process,p=u.setImmediate,h=u.clearImmediate,f=u.MessageChannel,v=u.Dispatch,m=0,g={},_=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},x=function(t){_.call(t.data)};p&&h||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++m]=function(){s("function"==typeof t?t:Function(t),e)},i(m),m},h=function(t){delete g[t]},"process"==n(28)(l)?i=function(t){l.nextTick(a(_,t,1))}:v&&v.now?i=function(t){v.now(a(_,t,1))}:f?(r=new f,o=r.port2,r.port1.onmessage=x,i=a(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(t){u.postMessage(t+"","*")},u.addEventListener("message",x,!1)):i="onreadystatechange"in d("script")?function(t){c.appendChild(d("script")).onreadystatechange=function(){c.removeChild(this),_.call(t)}}:function(t){setTimeout(a(_,t,1),0)}),t.exports={set:p,clear:h}},297:function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},298:function(t,e,n){var i=n(11),r=n(16),o=n(285);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},310:function(t,e,n){t.exports=n.p+"b6588f439fa0741d8cec6983e8ddd4a2.png"},316:function(t,e,n){t.exports={default:n(317),__esModule:!0}},317:function(t,e,n){n(92),n(30),n(54),n(318),n(326),n(327),t.exports=n(3).Promise},318:function(t,e,n){"use strict";var i,r,o,a,s=n(23),c=n(5),d=n(50),u=n(90),l=n(22),p=n(16),h=n(85),f=n(319),v=n(320),m=n(295),g=n(296).set,_=n(322)(),x=n(285),b=n(297),y=n(323),w=n(298),k=c.TypeError,P=c.process,S=P&&P.versions,E=S&&S.v8||"",M=c.Promise,j="process"==u(P),F=function(){},$=r=x.f,C=!!function(){try{var t=M.resolve(1),e=(t.constructor={})[n(2)("species")]=function(t){t(F,F)};return(j||"function"==typeof PromiseRejectionEvent)&&t.then(F)instanceof e&&0!==E.indexOf("6.6")&&-1===y.indexOf("Chrome/66")}catch(t){}}(),I=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},R=function(t,e){if(!t._n){t._n=!0;var n=t._c;_(function(){for(var i=t._v,r=1==t._s,o=0;n.length>o;)!function(e){var n,o,a,s=r?e.ok:e.fail,c=e.resolve,d=e.reject,u=e.domain;try{s?(r||(2==t._h&&T(t),t._h=1),!0===s?n=i:(u&&u.enter(),n=s(i),u&&(u.exit(),a=!0)),n===e.promise?d(k("Promise-chain cycle")):(o=I(n))?o.call(n,c,d):c(n)):d(i)}catch(t){u&&!a&&u.exit(),d(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&B(t)})}},B=function(t){g.call(c,function(){var e,n,i,r=t._v,o=O(t);if(o&&(e=b(function(){j?P.emit("unhandledRejection",r,t):(n=c.onunhandledrejection)?n({promise:t,reason:r}):(i=c.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=j||O(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},O=function(t){return 1!==t._h&&0===(t._a||t._c).length},T=function(t){g.call(c,function(){var e;j?P.emit("rejectionHandled",t):(e=c.onrejectionhandled)&&e({promise:t,reason:t._v})})},L=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),R(e,!0))},z=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw k("Promise can't be resolved itself");(e=I(t))?_(function(){var i={_w:n,_d:!1};try{e.call(t,d(z,i,1),d(L,i,1))}catch(t){L.call(i,t)}}):(n._v=t,n._s=1,R(n,!1))}catch(t){L.call({_w:n,_d:!1},t)}}};C||(M=function(t){f(this,M,"Promise","_h"),h(t),i.call(this);try{t(d(z,this,1),d(L,this,1))}catch(t){L.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(324)(M.prototype,{then:function(t,e){var n=$(m(this,M));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=j?P.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.promise=t,this.resolve=d(z,t,1),this.reject=d(L,t,1)},x.f=$=function(t){return t===M||t===a?new o(t):r(t)}),l(l.G+l.W+l.F*!C,{Promise:M}),n(31)(M,"Promise"),n(325)("Promise"),a=n(3).Promise,l(l.S+l.F*!C,"Promise",{reject:function(t){var e=$(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(s||!C),"Promise",{resolve:function(t){return w(s&&this===a?M:this,t)}}),l(l.S+l.F*!(C&&n(91)(function(t){M.all(t).catch(F)})),"Promise",{all:function(t){var e=this,n=$(e),i=n.resolve,r=n.reject,o=b(function(){var n=[],o=0,a=1;v(t,!1,function(t){var s=o++,c=!1;n.push(void 0),a++,e.resolve(t).then(function(t){c||(c=!0,n[s]=t,--a||i(n))},r)}),--a||i(n)});return o.e&&r(o.v),n.promise},race:function(t){var e=this,n=$(e),i=n.reject,r=b(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},319:function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},320:function(t,e,n){var i=n(50),r=n(88),o=n(89),a=n(11),s=n(52),c=n(53),d={},u={},e=t.exports=function(t,e,n,l,p){var h,f,v,m,g=p?function(){return t}:c(t),_=i(n,l,e?2:1),x=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(h=s(t.length);h>x;x++)if((m=e?_(a(f=t[x])[0],f[1]):_(t[x]))===d||m===u)return m}else for(v=g.call(t);!(f=v.next()).done;)if((m=r(v,_,f.value,e))===d||m===u)return m};e.BREAK=d,e.RETURN=u},321:function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},322:function(t,e,n){var i=n(5),r=n(296).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,c="process"==n(28)(a);t.exports=function(){var t,e,n,d=function(){var i,r;for(c&&(i=a.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(c)n=function(){a.nextTick(d)};else if(!o||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var u=s.resolve(void 0);n=function(){u.then(d)}}else n=function(){r.call(i,d)};else{var l=!0,p=document.createTextNode("");new o(d).observe(p,{characterData:!0}),n=function(){p.data=l=!l}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},323:function(t,e,n){var i=n(5),r=i.navigator;t.exports=r&&r.userAgent||""},324:function(t,e,n){var i=n(13);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:i(t,r,e[r]);return t}},325:function(t,e,n){"use strict";var i=n(5),r=n(3),o=n(7),a=n(12),s=n(2)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:i[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},326:function(t,e,n){"use strict";var i=n(22),r=n(3),o=n(5),a=n(295),s=n(298);i(i.P+i.R,"Promise",{finally:function(t){var e=a(this,r.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},327:function(t,e,n){"use strict";var i=n(22),r=n(285),o=n(297);i(i.S,"Promise",{try:function(t){var e=r.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},772:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(316),o=i(r),a=n(29);i(a);e.default={name:"video-edit",data:function(){return{title:"",titleError:"",source:0,center_id:0,status:"0",centerList:{},upload_data:{},thumb:"",cover_img:"",video_url:"",video_time:0}},created:function(){this.getDetail(),this.getCenterList()},methods:{handleFormatError:function(){this.$Message.error("文件格式错误")},handleSizeError:function(){this.$Message.error("文件超出大小限制")},handleSuccess:function(t){1===t.status?(this.cover_img=t.data.file_url,this.thumb=t.data.img_url):this.$Message.error(t.msg)},handleVideoSuccess:function(t){1===t.status?(this.video_url=t.data.file_url,this.video_time=t.data.total_time):this.$Message.error(t.msg)},handleBeforeUpload:function(){var t=this,e=this;return this.request({api:"/v1/upload/upload",user_type:3},function(t){1===t.status&&(e.upload_data=t.data)},!1),new o.default(function(e){t.$nextTick(function(){e(!0)})})},getDetail:function(){var t=this;this.id=this.$route.params.video_id,this.request({user_type:3,api:"/v1/video/read",id:this.id},function(e){1===e.status&&(t.title=e.data.title,t.center_id=e.data.center_id.toString(),t.status=e.data.status.toString(),t.cover_img=e.data.thumb,t.thumb=e.data.thumb,t.video_url=e.data.url)})},getCenterList:function(){var t=this;this.request({api:"/v1/mooc_center/index",user_type:3,all:1},function(e){1===e.status?t.centerList=t.array_map(e.data,"id","center_name"):t.centerList={}})},SubmitEdit:function(){var t=this;return this.id=this.$route.params.video_id,0===this.title.length?(this.$Message.error("标题不能为空"),!1):0===this.center_id?(this.$Message.error("请选择来源"),!1):""===this.thumb?(this.$Message.error("请上传缩略图"),!1):""===this.url?(this.$Message.error("请上传视频"),!1):void this.request({user_type:3,api:"/v1/video/update",id:this.id,title:this.title,center_id:this.center_id,status:this.status,thumb:this.thumb,url:this.video_url,video_time:this.video_time},function(e){1===e.status?t.$Modal.info({title:"修改",content:"修改视频成功",onOk:function(){t.$router.push({name:"video_index"})}}):t.$Message.error("修改视频失败")})},handleBack:function(){this.$router.go(-1)}}}},878:function(t,e,n){var i=n(879);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(10)("64dc66dd",i,!1,{})},879:function(t,e,n){e=t.exports=n(9)(!1),e.push([t.i,"\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.article-link-con {\n  height: 32px;\n  width: 100%;\n}\n.fixed-link-enter {\n  opacity: 0;\n}\n.fixed-link-enter-active,\n.fixed-link-leave-active {\n  transition: opacity 0.3s;\n}\n.fixed-link-enter-to {\n  opacity: 1;\n}\n.openness-radio-con {\n  margin-left: 40px;\n  padding-left: 10px;\n  height: 130px;\n  border-left: 1px dashed #ebe9f3;\n  overflow: hidden;\n}\n.publish-time-picker-con {\n  margin-left: 40px;\n  padding-left: 10px;\n  height: 100px;\n  border-left: 1px dashed #ebe9f3;\n  overflow: hidden;\n}\n.openness-con-enter {\n  height: 0;\n}\n.openness-con-enter-active,\n.openness-con-leave-active {\n  transition: height .3s;\n}\n.openness-con-enter-to {\n  height: 130px;\n}\n.openness-con-leave {\n  height: 130px;\n}\n.openness-con-leave-to {\n  height: 0;\n}\n.publish-button-con {\n  border-top: 1px solid #f3eff1;\n  padding-top: 14px;\n}\n.publish-button {\n  float: right;\n  margin-left: 10px;\n}\n.publish-time-enter {\n  height: 0;\n}\n.publish-time-enter-active,\n.publish-time-leave-active {\n  transition: height .3s;\n}\n.publish-time-enter-to {\n  height: 100px;\n}\n.publish-time-leave {\n  height: 100px;\n}\n.publish-time-leave-to {\n  height: 0;\n}\n.classification-con {\n  height: 200px;\n  margin-top: -16px;\n  border-left: 1px solid #dddee1;\n  border-right: 1px solid #dddee1;\n  border-bottom: 1px solid #dddee1;\n  border-radius: 0 0 3px 3px;\n  padding: 10px;\n  overflow: auto;\n}\n.add-new-tag-con {\n  margin-top: 20px;\n  border-top: 1px dashed #dbdddf;\n  padding: 20px 0;\n  height: 60px;\n  overflow: hidden;\n}\n.add-new-tag-enter {\n  height: 0;\n  margin-top: 0;\n  padding: 0px 0;\n}\n.add-new-tag-enter-active,\n.add-new-tag-leave-active {\n  transition: all .3s;\n}\n.add-new-tag-enter-to {\n  height: 60px;\n  margin-top: 20px;\n  padding: 20px 0;\n}\n.add-new-tag-leave {\n  height: 60px;\n  margin-top: 20px;\n  padding: 20px 0;\n}\n.add-new-tag-leave-to {\n  height: 0;\n  margin-top: 0;\n  padding: 0px 0;\n}\n",""])},880:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Row",[i("Col",{attrs:{span:"18"}},[i("Card",[i("Form",{attrs:{"label-width":80}},[i("FormItem",{attrs:{label:"标题",error:t.titleError}},[i("Input",{attrs:{icon:"android-list"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),i("FormItem",{attrs:{label:"来源",error:t.titleError}},[i("Select",{attrs:{disabled:""},model:{value:t.center_id,callback:function(e){t.center_id=e},expression:"center_id"}},t._l(t.centerList,function(e,n){return i("Option",{key:n,attrs:{value:n}},[t._v(t._s(e))])}))],1),t._v(" "),i("FormItem",{staticClass:"margin-top-20",attrs:{label:"状态:"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[i("RadioGroup",{model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[i("Radio",{attrs:{label:"1"}},[t._v("显示")]),t._v(" "),i("Radio",{attrs:{label:"0"}},[t._v("隐藏")])],1)],1),t._v(" "),i("FormItem",{attrs:{label:"缩略图"}},[i("Upload",{attrs:{action:"http://demo-mooc.com/v1/upload/upload",accept:"image/*",format:["jpg","png","gif"],"show-upload-list":!1,"max-size":1024,data:t.upload_data,"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleSizeError}},[t.cover_img?i("img",{staticStyle:{width:"120px",cursor:"pointer",height:"120px",display:"inline-block","background-color":"rgb(226, 226,226)"},attrs:{src:t.cover_img}}):i("img",{staticStyle:{width:"120px",cursor:"pointer"},attrs:{src:n(310),alt:""}})])],1),t._v(" "),i("FormItem",{attrs:{label:"视频"}},[i("Col",{attrs:{span:"2"}},[i("Upload",{attrs:{action:"http://demo-mooc.com/v1/upload/upload",accept:"video/*",format:["mp4"],"show-upload-list":!1,"max-size":204800,data:t.upload_data,"on-success":t.handleVideoSuccess,"before-upload":t.handleBeforeUpload,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleSizeError}},[i("Button",{attrs:{type:"primary"}},[i("Icon",{attrs:{type:"ios-videocam"}}),t._v(" 视频上传")],1)],1)],1),t._v(" "),i("Col",{attrs:{span:"18"}},[i("Input",{model:{value:t.video_url,callback:function(e){t.video_url=e},expression:"video_url"}})],1)],1),t._v(" "),i("FormItem",[i("Button",{attrs:{type:"primary"},on:{click:t.SubmitEdit}},[t._v("Submit")]),t._v(" "),i("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.handleBack}},[t._v("Cancel")])],1)],1)],1)],1)],1)],1)},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.default=o}});