webpackJsonp([10],{243:function(t,n,e){"use strict";function i(t){u||e(884)}Object.defineProperty(n,"__esModule",{value:!0});var o=e(774),r=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(n,t,function(){return o[t]})}(a);var s=e(886),c=e.n(s),u=!1,l=e(0),d=i,p=l(r.a,c.a,!1,d,null,null);p.options.__file="src/views/video/video-add.vue",n.default=p.exports},285:function(t,n,e){"use strict";function i(t){var n,e;this.promise=new t(function(t,i){if(void 0!==n||void 0!==e)throw TypeError("Bad Promise constructor");n=t,e=i}),this.resolve=o(n),this.reject=o(e)}var o=e(85);t.exports.f=function(t){return new i(t)}},295:function(t,n,e){var i=e(11),o=e(85),r=e(2)("species");t.exports=function(t,n){var e,a=i(t).constructor;return void 0===a||void 0==(e=i(a)[r])?n:o(e)}},296:function(t,n,e){var i,o,r,a=e(50),s=e(321),c=e(87),u=e(51),l=e(5),d=l.process,p=l.setImmediate,f=l.clearImmediate,h=l.MessageChannel,v=l.Dispatch,m=0,g={},x=function(){var t=+this;if(g.hasOwnProperty(t)){var n=g[t];delete g[t],n()}},_=function(t){x.call(t.data)};p&&f||(p=function(t){for(var n=[],e=1;arguments.length>e;)n.push(arguments[e++]);return g[++m]=function(){s("function"==typeof t?t:Function(t),n)},i(m),m},f=function(t){delete g[t]},"process"==e(28)(d)?i=function(t){d.nextTick(a(x,t,1))}:v&&v.now?i=function(t){v.now(a(x,t,1))}:h?(o=new h,r=o.port2,o.port1.onmessage=_,i=a(r.postMessage,r,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(i=function(t){l.postMessage(t+"","*")},l.addEventListener("message",_,!1)):i="onreadystatechange"in u("script")?function(t){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),x.call(t)}}:function(t){setTimeout(a(x,t,1),0)}),t.exports={set:p,clear:f}},297:function(t,n){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},298:function(t,n,e){var i=e(11),o=e(16),r=e(285);t.exports=function(t,n){if(i(t),o(n)&&n.constructor===t)return n;var e=r.f(t);return(0,e.resolve)(n),e.promise}},310:function(t,n,e){t.exports=e.p+"b6588f439fa0741d8cec6983e8ddd4a2.png"},316:function(t,n,e){t.exports={default:e(317),__esModule:!0}},317:function(t,n,e){e(92),e(30),e(54),e(318),e(326),e(327),t.exports=e(3).Promise},318:function(t,n,e){"use strict";var i,o,r,a,s=e(23),c=e(5),u=e(50),l=e(90),d=e(22),p=e(16),f=e(85),h=e(319),v=e(320),m=e(295),g=e(296).set,x=e(322)(),_=e(285),b=e(297),y=e(323),w=e(298),k=c.TypeError,P=c.process,M=P&&P.versions,S=M&&M.v8||"",E=c.Promise,j="process"==l(P),F=function(){},$=o=_.f,C=!!function(){try{var t=E.resolve(1),n=(t.constructor={})[e(2)("species")]=function(t){t(F,F)};return(j||"function"==typeof PromiseRejectionEvent)&&t.then(F)instanceof n&&0!==S.indexOf("6.6")&&-1===y.indexOf("Chrome/66")}catch(t){}}(),I=function(t){var n;return!(!p(t)||"function"!=typeof(n=t.then))&&n},R=function(t,n){if(!t._n){t._n=!0;var e=t._c;x(function(){for(var i=t._v,o=1==t._s,r=0;e.length>r;)!function(n){var e,r,a,s=o?n.ok:n.fail,c=n.resolve,u=n.reject,l=n.domain;try{s?(o||(2==t._h&&T(t),t._h=1),!0===s?e=i:(l&&l.enter(),e=s(i),l&&(l.exit(),a=!0)),e===n.promise?u(k("Promise-chain cycle")):(r=I(e))?r.call(e,c,u):c(e)):u(i)}catch(t){l&&!a&&l.exit(),u(t)}}(e[r++]);t._c=[],t._n=!1,n&&!t._h&&B(t)})}},B=function(t){g.call(c,function(){var n,e,i,o=t._v,r=O(t);if(r&&(n=b(function(){j?P.emit("unhandledRejection",o,t):(e=c.onunhandledrejection)?e({promise:t,reason:o}):(i=c.console)&&i.error&&i.error("Unhandled promise rejection",o)}),t._h=j||O(t)?2:1),t._a=void 0,r&&n.e)throw n.v})},O=function(t){return 1!==t._h&&0===(t._a||t._c).length},T=function(t){g.call(c,function(){var n;j?P.emit("rejectionHandled",t):(n=c.onrejectionhandled)&&n({promise:t,reason:t._v})})},L=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,n._a||(n._a=n._c.slice()),R(n,!0))},U=function(t){var n,e=this;if(!e._d){e._d=!0,e=e._w||e;try{if(e===t)throw k("Promise can't be resolved itself");(n=I(t))?x(function(){var i={_w:e,_d:!1};try{n.call(t,u(U,i,1),u(L,i,1))}catch(t){L.call(i,t)}}):(e._v=t,e._s=1,R(e,!1))}catch(t){L.call({_w:e,_d:!1},t)}}};C||(E=function(t){h(this,E,"Promise","_h"),f(t),i.call(this);try{t(u(U,this,1),u(L,this,1))}catch(t){L.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=e(324)(E.prototype,{then:function(t,n){var e=$(m(this,E));return e.ok="function"!=typeof t||t,e.fail="function"==typeof n&&n,e.domain=j?P.domain:void 0,this._c.push(e),this._a&&this._a.push(e),this._s&&R(this,!1),e.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new i;this.promise=t,this.resolve=u(U,t,1),this.reject=u(L,t,1)},_.f=$=function(t){return t===E||t===a?new r(t):o(t)}),d(d.G+d.W+d.F*!C,{Promise:E}),e(31)(E,"Promise"),e(325)("Promise"),a=e(3).Promise,d(d.S+d.F*!C,"Promise",{reject:function(t){var n=$(this);return(0,n.reject)(t),n.promise}}),d(d.S+d.F*(s||!C),"Promise",{resolve:function(t){return w(s&&this===a?E:this,t)}}),d(d.S+d.F*!(C&&e(91)(function(t){E.all(t).catch(F)})),"Promise",{all:function(t){var n=this,e=$(n),i=e.resolve,o=e.reject,r=b(function(){var e=[],r=0,a=1;v(t,!1,function(t){var s=r++,c=!1;e.push(void 0),a++,n.resolve(t).then(function(t){c||(c=!0,e[s]=t,--a||i(e))},o)}),--a||i(e)});return r.e&&o(r.v),e.promise},race:function(t){var n=this,e=$(n),i=e.reject,o=b(function(){v(t,!1,function(t){n.resolve(t).then(e.resolve,i)})});return o.e&&i(o.v),e.promise}})},319:function(t,n){t.exports=function(t,n,e,i){if(!(t instanceof n)||void 0!==i&&i in t)throw TypeError(e+": incorrect invocation!");return t}},320:function(t,n,e){var i=e(50),o=e(88),r=e(89),a=e(11),s=e(52),c=e(53),u={},l={},n=t.exports=function(t,n,e,d,p){var f,h,v,m,g=p?function(){return t}:c(t),x=i(e,d,n?2:1),_=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(r(g)){for(f=s(t.length);f>_;_++)if((m=n?x(a(h=t[_])[0],h[1]):x(t[_]))===u||m===l)return m}else for(v=g.call(t);!(h=v.next()).done;)if((m=o(v,x,h.value,n))===u||m===l)return m};n.BREAK=u,n.RETURN=l},321:function(t,n){t.exports=function(t,n,e){var i=void 0===e;switch(n.length){case 0:return i?t():t.call(e);case 1:return i?t(n[0]):t.call(e,n[0]);case 2:return i?t(n[0],n[1]):t.call(e,n[0],n[1]);case 3:return i?t(n[0],n[1],n[2]):t.call(e,n[0],n[1],n[2]);case 4:return i?t(n[0],n[1],n[2],n[3]):t.call(e,n[0],n[1],n[2],n[3])}return t.apply(e,n)}},322:function(t,n,e){var i=e(5),o=e(296).set,r=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,c="process"==e(28)(a);t.exports=function(){var t,n,e,u=function(){var i,o;for(c&&(i=a.domain)&&i.exit();t;){o=t.fn,t=t.next;try{o()}catch(i){throw t?e():n=void 0,i}}n=void 0,i&&i.enter()};if(c)e=function(){a.nextTick(u)};else if(!r||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);e=function(){l.then(u)}}else e=function(){o.call(i,u)};else{var d=!0,p=document.createTextNode("");new r(u).observe(p,{characterData:!0}),e=function(){p.data=d=!d}}return function(i){var o={fn:i,next:void 0};n&&(n.next=o),t||(t=o,e()),n=o}}},323:function(t,n,e){var i=e(5),o=i.navigator;t.exports=o&&o.userAgent||""},324:function(t,n,e){var i=e(13);t.exports=function(t,n,e){for(var o in n)e&&t[o]?t[o]=n[o]:i(t,o,n[o]);return t}},325:function(t,n,e){"use strict";var i=e(5),o=e(3),r=e(7),a=e(12),s=e(2)("species");t.exports=function(t){var n="function"==typeof o[t]?o[t]:i[t];a&&n&&!n[s]&&r.f(n,s,{configurable:!0,get:function(){return this}})}},326:function(t,n,e){"use strict";var i=e(22),o=e(3),r=e(5),a=e(295),s=e(298);i(i.P+i.R,"Promise",{finally:function(t){var n=a(this,o.Promise||r.Promise),e="function"==typeof t;return this.then(e?function(e){return s(n,t()).then(function(){return e})}:t,e?function(e){return s(n,t()).then(function(){throw e})}:t)}})},327:function(t,n,e){"use strict";var i=e(22),o=e(285),r=e(297);i(i.S,"Promise",{try:function(t){var n=o.f(this),e=r(t);return(e.e?n.reject:n.resolve)(e.v),n.promise}})},774:function(t,n,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(316),r=i(o),a=e(29),s=i(a);n.default={name:"video-add",data:function(){return{title:"",titleError:"",source:0,center_id:0,type:0,status:"1",centerList:{},video_url:"",upload_data:{},cover_img:"",thumb:""}},created:function(){this.getCenterList()},methods:{handleFormatError:function(){this.$Message.error("文件格式错误")},handleSizeError:function(){this.$Message.error("文件超出大小限制")},handleSuccess:function(t){1===t.status?(this.cover_img=t.data.file_url,this.thumb=t.data.img_url):this.$Message.error(t.msg)},handleVideoSuccess:function(t){1===t.status?this.video_url=t.data.file_url:this.$Message.error(t.msg)},handleBeforeUpload:function(){var t=this,n=this;return this.request({api:"/v1/upload/upload",user_type:3},function(t){1===t.status&&(n.upload_data=t.data)},!1),new r.default(function(n){t.$nextTick(function(){n(!0)})})},getCenterList:function(){var t=this;s.default.get("http://demo-mooc.com/v1/proxy/index",{params:{api:"/v1/mooc_center/index",user_type:3,all:1}}).then(function(n){n=n.data,1===n.status?t.centerList=t.array_map(n.data,"id","center_name"):t.centerList={}}).catch(function(t){console.log(t.stack)})},SubmitVideo:function(){var t=this;return 0===this.title.length?(this.$Message.error("标题不能为空"),!1):0===this.center_id?(this.$Message.error("请选择来源"),!1):""===this.thumb?(this.$Message.error("请上传缩略图"),!1):""===this.url?(this.$Message.error("请上传视频"),!1):void s.default.get("http://demo-mooc.com/v1/proxy/index",{params:{user_type:3,api:"/v1/video/save",center_id:this.center_id,title:this.title,thumb:this.thumb,status:this.status,type:this.type,url:this.video_url}}).then(function(n){n=n.data,1===n.status?t.$Modal.info({title:"添加",content:"添加成功",onOk:function(){t.$router.push({name:"video_index"})}}):console.log(n.msg)}).catch(function(t){console.log(t.track)})},handleBack:function(){this.$router.go(-1)},handleUpload:function(){}}}},884:function(t,n,e){var i=e(885);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(10)("0c8359d6",i,!1,{})},885:function(t,n,e){n=t.exports=e(9)(!1),n.push([t.i,"\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.article-link-con {\n  height: 32px;\n  width: 100%;\n}\n.fixed-link-enter {\n  opacity: 0;\n}\n.fixed-link-enter-active,\n.fixed-link-leave-active {\n  transition: opacity 0.3s;\n}\n.fixed-link-enter-to {\n  opacity: 1;\n}\n.openness-radio-con {\n  margin-left: 40px;\n  padding-left: 10px;\n  height: 130px;\n  border-left: 1px dashed #ebe9f3;\n  overflow: hidden;\n}\n.publish-time-picker-con {\n  margin-left: 40px;\n  padding-left: 10px;\n  height: 100px;\n  border-left: 1px dashed #ebe9f3;\n  overflow: hidden;\n}\n.openness-con-enter {\n  height: 0;\n}\n.openness-con-enter-active,\n.openness-con-leave-active {\n  transition: height .3s;\n}\n.openness-con-enter-to {\n  height: 130px;\n}\n.openness-con-leave {\n  height: 130px;\n}\n.openness-con-leave-to {\n  height: 0;\n}\n.publish-button-con {\n  border-top: 1px solid #f3eff1;\n  padding-top: 14px;\n}\n.publish-button {\n  float: right;\n  margin-left: 10px;\n}\n.publish-time-enter {\n  height: 0;\n}\n.publish-time-enter-active,\n.publish-time-leave-active {\n  transition: height .3s;\n}\n.publish-time-enter-to {\n  height: 100px;\n}\n.publish-time-leave {\n  height: 100px;\n}\n.publish-time-leave-to {\n  height: 0;\n}\n.classification-con {\n  height: 200px;\n  margin-top: -16px;\n  border-left: 1px solid #dddee1;\n  border-right: 1px solid #dddee1;\n  border-bottom: 1px solid #dddee1;\n  border-radius: 0 0 3px 3px;\n  padding: 10px;\n  overflow: auto;\n}\n.add-new-tag-con {\n  margin-top: 20px;\n  border-top: 1px dashed #dbdddf;\n  padding: 20px 0;\n  height: 60px;\n  overflow: hidden;\n}\n.add-new-tag-enter {\n  height: 0;\n  margin-top: 0;\n  padding: 0px 0;\n}\n.add-new-tag-enter-active,\n.add-new-tag-leave-active {\n  transition: all .3s;\n}\n.add-new-tag-enter-to {\n  height: 60px;\n  margin-top: 20px;\n  padding: 20px 0;\n}\n.add-new-tag-leave {\n  height: 60px;\n  margin-top: 20px;\n  padding: 20px 0;\n}\n.add-new-tag-leave-to {\n  height: 0;\n  margin-top: 0;\n  padding: 0px 0;\n}\n",""])},886:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",[i("Row",[i("Col",{attrs:{span:"18"}},[i("Card",[i("Form",{attrs:{"label-width":80}},[i("FormItem",{attrs:{label:"标题",error:t.titleError}},[i("Input",{attrs:{icon:"android-list"},model:{value:t.title,callback:function(n){t.title=n},expression:"title"}})],1),t._v(" "),i("FormItem",{attrs:{label:"来源",error:t.titleError}},[i("Select",{model:{value:t.center_id,callback:function(n){t.center_id=n},expression:"center_id"}},t._l(t.centerList,function(n,e){return i("Option",{key:e,attrs:{value:e}},[t._v(t._s(n))])}))],1),t._v(" "),i("FormItem",{staticClass:"margin-top-20",attrs:{label:"状态:"},model:{value:t.status,callback:function(n){t.status=n},expression:"status"}},[i("RadioGroup",{model:{value:t.status,callback:function(n){t.status=n},expression:"status"}},[i("Radio",{attrs:{label:"1"}},[t._v("显示")]),t._v(" "),i("Radio",{attrs:{label:"0"}},[t._v("隐藏")])],1)],1),t._v(" "),i("FormItem",{attrs:{label:"缩略图"}},[i("Upload",{attrs:{action:"http://demo-mooc.com/v1/upload/upload",accept:"image/*",format:["jpg","png","gif"],"show-upload-list":!1,"max-size":1024,data:t.upload_data,"on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleSizeError}},[t.cover_img?i("img",{staticStyle:{width:"120px",cursor:"pointer"},attrs:{src:t.cover_img,alt:""}}):i("img",{staticStyle:{width:"120px",cursor:"pointer"},attrs:{src:e(310),alt:""}})])],1),t._v(" "),i("FormItem",{attrs:{label:"视频"}},[i("Col",{attrs:{span:"2"}},[i("Upload",{attrs:{action:"http://demo-mooc.com/v1/upload/upload",accept:"video/*",format:["mp4"],"show-upload-list":!1,"max-size":204800,data:t.upload_data,"on-success":t.handleVideoSuccess,"before-upload":t.handleBeforeUpload,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleSizeError}},[i("Button",{attrs:{type:"primary"}},[i("Icon",{attrs:{type:"ios-videocam"}}),t._v(" 视频上传")],1)],1)],1),t._v(" "),i("Col",{attrs:{span:"18"}},[i("Input",{on:{"on-change":function(t){}},model:{value:t.video_url,callback:function(n){t.video_url=n},expression:"video_url"}})],1)],1),t._v(" "),i("FormItem",[i("Button",{attrs:{type:"primary"},on:{click:t.SubmitVideo}},[t._v("Submit")]),t._v(" "),i("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.handleBack}},[t._v("Cancel")])],1)],1)],1)],1)],1)],1)},o=[];i._withStripped=!0;var r={render:i,staticRenderFns:o};n.default=r}});